using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class MalwareScript : EnemyScript
{
    MalwareState _currentState;

	void Awake () 
    {
        _enemyName = "MalwareEnemy";
        base.Awake();
	}

    void ChangeStates(MalwareState newState)
    {
        _currentState.Exit();
        _currentState = newState;
        _currentState.Enter();
    }

    protected override void Death(bool deathViaBullet = true)
    {
        base.Death(deathViaBullet);
    }

    void OnTriggerEnter2D(Collider2D other)
    {
        if(other.gameObject.tag == "Player")
        {
            PlayerScript.Instance().TakeDamage(_damage);
        }
    }
	
	protected override void Update () 
    {
        if (_exists && GameController.Instance().CurrentGameState.StateName == "Gameplay")
        {
            if(_health <= 0)
            {
                Death();
            }

            if (_currentState)
                _currentState.UpdateState();

            _myPath.UpdatePath();
            _myGun.UpdateShooting();
        }
	}
}
